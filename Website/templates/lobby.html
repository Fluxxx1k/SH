<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–±–±–∏ - Secret Hitler</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='lobby.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="game-title">Secret Hitler</h1>
            <nav class="nav">
                <span class="welcome-message">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {{ username }}!</span>
                <a href="{{ url_for('logout') }}" class="nav-link logout-link">–í—ã–π—Ç–∏</a>
            </nav>
        </header>

        <main class="main-content">
            <div class="lobby-container">
                <div class="game-actions">
                    <h2>–î–µ–π—Å—Ç–≤–∏—è</h2>
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="showCreateGameModal()">–°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É</button>
                        <button class="btn btn-secondary" onclick="showJoinGameModal()">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</button>
                    </div>
                </div>

                <div class="available-games">
                    <div class="games-header">
                        <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–≥—Ä—ã</h2>
                        <button class="btn btn-refresh" onclick="refreshGames()" title="–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä">
                            <span class="refresh-icon">üîÑ</span> –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                    <div id="gamesList" class="games-list">
                        {% if games %}
                            {% for game_name, current_players, max_players, status, has_password in games %}
                                <div class="game-item" data-game-name="{{ game_name }}">
                                    <div class="game-name">{{ game_name }}</div>
                                    <div class="game-info">
                                        <span class="game-status">–°—Ç–∞—Ç—É—Å: {% if status == 'waiting' %}–û–∂–∏–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤{% else %}–í –ø—Ä–æ—Ü–µ—Å—Å–µ{% endif %}</span>
                                        <span class="game-password-status">{% if has_password %}üîí{% else %}üîì{% endif %}</span>
                                    </div>
                                    <div class="game-players">
                                        <span class="player-count">–ò–≥—Ä–æ–∫–∏: {{ current_players }}/{{ max_players }}</span>
                                        <button class="join-btn" onclick="quickJoinGame('{{ game_name }}', {% if has_password %}true{% else %}false{% endif %})">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                                    </div>
                                </div>
                            {% endfor %}
                        {% else %}
                            <div class="no-games-message">
                                <p>–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–≥—Ä. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∏–≥—Ä—É!</p>
                            </div>
                        {% endif %}
                    </div>
                </div>

                <div class="player-info">
                    <h2>–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å</h2>
                    <div class="player-stats">
                        <p><strong>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</strong> {{ username }}</p>
                        <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span class="status-online">–û–Ω–ª–∞–π–Ω</span></p>
                    </div>
                </div>
            </div>
        </main>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä—ã -->
        <div id="createGameModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeCreateGameModal()">&times;</span>
                <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É</h2>
                <form id="createGameForm" class="game-form">
                    <div class="form-group">
                        <label for="gameName">–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã:</label>
                        <input type="text" id="gameName" name="game_name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="gamePassword">–ü–∞—Ä–æ–ª—å –∏–≥—Ä—ã (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
                        <input type="password" id="gamePassword" name="game_password">
                    </div>
                    
                    <div class="form-group">
                        <label for="maxPlayers">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤:</label>
                        <select id="maxPlayers" name="max_players" required>
                            <option value="5">5 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="6">6 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="7">7 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="8" selected>8 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="9">9 –∏–≥—Ä–æ–∫–æ–≤</option>
                            <option value="10">10 –∏–≥—Ä–æ–∫–æ–≤</option>
                        </select>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É</button>
                        <button type="button" class="btn btn-secondary" onclick="closeCreateGameModal()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –∏–≥—Ä–µ -->
        <div id="joinGameModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeJoinGameModal()">&times;</span>
                <h2>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</h2>
                <form id="joinGameForm" class="game-form">
                    <div class="form-group">
                        <label for="joinGameName">–ù–∞–∑–≤–∞–Ω–∏–µ –∏–≥—Ä—ã:</label>
                        <input type="text" id="joinGameName" name="game_name" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="joinGamePassword">–ü–∞—Ä–æ–ª—å –∏–≥—Ä—ã (–µ—Å–ª–∏ –µ—Å—Ç—å):</label>
                        <input type="password" id="joinGamePassword" name="game_password">
                    </div>
                    
                    <div class="form-buttons">
                        <button type="submit" class="btn btn-primary">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                        <button type="button" class="btn btn-secondary" onclick="closeJoinGameModal()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>

        <footer class="footer">
            <p>&copy; 2024 Secret Hitler Online. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='lobby.js') }}"></script>
</body>
</html>